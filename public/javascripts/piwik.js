CloudFlare.define("piwik_open_source_web_analytics",["piwik_open_source_web_analytics/config"],function(){"use strict";function t(t,i){return String.prototype.startsWith?t.toString().startsWith(i):(t=t.toString(),i=i.toString(),t.substr(0,i.length)===i)}function i(t,i){return String.prototype.endsWith?t.toString().endsWith(i):(t=t.toString(),i=i.toString(),t.toString().slice(-1*i.length)===i)}function e(t){return"undefined"!=typeof t&&!!t&&"0"!==t&&"false"!==t&&"no"!==t}function n(t){if(this.log=console||{error:function(){},info:function(){},log:function(){}},this.config={id:1,url:!1,prependDomain:!1,setDomainCookie:!1,ssl:!1,setDoNotTrack:!0},t)for(var i in t)t.hasOwnProperty(i)&&(this.config[i]=t[i]);this.load()}n.prototype.load=function(){var t=this.getUrl();if(t!==!1)try{var i=i||[];i.push(["trackPageView"]),i.push(["enableLinkTracking"]),i.push(["setDoNotTrack",e(this.config.setDoNotTrack)]),i.push(["setTrackerUrl",t+"piwik.php"]),i.push(["setSiteId",this.config.id]),e(this.config.prependDomain)&&i.push(["setDocumentTitle",document.domain+"/"+document.title]),e(this.config.setDomainCookie)&&i.push(["setDomainCookie","*."+document.domain]);var n=document.createElement("script"),o=document.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.defer=!0,n.src=t+"piwik.js",o.parentNode.insertBefore(n,o),window._paq=i}catch(r){this.log.error("[CF-PIWIK] ",r.message)}},n.prototype.getUrl=function(){if(!this.config.url)return this.log.error("[CF-PIWIK] No server url defined. Can't continue"),!1;var e=this.config.url.toString(),n=t(e,"http://")||t(e,"https://")||t(e,"//"),o=this.config.ssl||!1,r=i(e,"/");return n||(e="http"+(o?"s":"")+"://"+e),r||(e+="/"),e}});