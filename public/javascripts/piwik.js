CloudFlare.define("piwik_open_source_web_analytics",["piwik_open_source_web_analytics/config"],function(){"use strict";function t(t){return"undefined"!=typeof t&&!!t&&"0"!==t&&"false"!==t&&"no"!==t}function e(t){if(this.log=console||{error:function(){},info:function(){},log:function(){}},this.config={id:1,url:!1,prependDomain:!1,setDomainCookie:!1,ssl:!1,setDoNotTrack:!0},t)for(var e in t)t.hasOwnProperty(e)&&(this.config[e]=t[e]);this.load()}String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(t,e){var i=this.toString();(void 0===e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e}}),e.prototype.load=function(){var e=this.getUrl();if(e!==!1)try{var i=i||[];i.push(["trackPageView"]),i.push(["enableLinkTracking"]),i.push(["setDoNotTrack",t(this.config.setDoNotTrack)]),i.push(["setTrackerUrl",e+"piwik.php"]),i.push(["setSiteId",this.config.id]),t(this.config.prependDomain)&&i.push(["setDocumentTitle",document.domain+"/"+document.title]),t(this.config.setDomainCookie)&&i.push(["setDomainCookie","*."+document.domain]);var n=document.createElement("script"),o=document.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.defer=!0,n.src=e+"piwik.js",o.parentNode.insertBefore(n,o),window._paq=i}catch(r){this.log.error("[CF-PIWIK] ",r.message)}},e.prototype.getUrl=function(){if(!this.config.url)return this.log.error("[CF-PIWIK] No server url defined. Can't continue"),!1;var t=this.config.url.toString(),e=t.startsWith("http://")||t.startsWith("https://")||t.startsWith("//"),i=this.config.ssl||!1,n=t.endsWith("/");return e||(t="http"+(i?"s":"")+"://"+t),n||(t+="/"),t}});